## vastify

> 一个轻量级的nodejs微服务框架

## 是什么

集成所有微服务必要特性的技术栈集合以及代码组织规范。

旨在：

- 更高效的编写易扩展代码
- 更高效的远程服务部署
- 服务可具备高可用性以及高伸缩性
- 服务监测的便利性、全面性与及时性
- 支持ab-test
- 支持自定义logger格式
- 支持服务注册与发现
- 支持微服务内部路由
- 支持http网关

缺陷：

- 由于mongodb本身不支持事务，所以对事务依赖比较严重且逻辑非常复杂的业务不友好

## 特性

- 模式匹配做服务间调用：略微不同于SpringCloud服务发现（http协议、IP + PORT模式），它使用更加灵活的模式匹配（Patrun模块）原则去进行微服务间的调用
- 接入koa2对C端提供RESTFUl API
- 插件：更灵活编写小而微的可复用模块
- seneca内置日志输出
- 第三方日志库比较winston（选用）、bunyan、log4js
- RabbitMQ消息队列
- PM2：node服务部署（服务集群）、管理与监控
- PM2：自动化部署
- 请求追踪（重建用户请求流程）
- 梳理Consul 服务注册与发现基本逻辑
- 框架集成node-consul
- mongodb持久化存储
- 内置结合了seneca与consul的路由中间件（可支持多个相同名字服务集群路由，通过$$version区别）
- 内置结合了seneca与consul的路由服务，对外提供便利的http网关（未完成）
- 支持流处理（文件上传/下载等）（未完成）
- jenkins自动化部署（未完成）
- PM2集成docker（未完成）
- nginx负载均衡（未完成）
- 持续集成方案（未完成）
- redis缓存（未完成）
- prisma提供GraphQL接口（未完成）
